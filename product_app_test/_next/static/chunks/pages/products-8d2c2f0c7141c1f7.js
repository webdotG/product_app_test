(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{2411:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r(3448)}])},3448:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var s=r(7876),l=r(4232),i=r(9143),o=r(7957),a=r(8865),n=r(1951),c=r(1494),d=r(9794),x=r(9017),h=r(9600),p=r(9957),u=r(8648),m=r(7334),j=r(3176),f=r(1642),A=r(6833),g=r(4868),y=r(4410),v=r(968),w=r(6652),b=r(5339),k=r(4538),C=r(1552),S=r(4933),z=r(6166),E=r(7675),P=r(946),_=r(3344),L=r(5230),W=r(7216),F=r(455),N=r(8230),O=r.n(N),D=r(28);let T=e=>{let{product:t,onLike:r,onDelete:l,onEdit:i,showActions:o=!0}=e;return(0,s.jsxs)(k.A,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"box-shadow 0.3s","&:hover":{boxShadow:3}},children:[(0,s.jsx)(O(),{href:"/products/".concat(t.id),passHref:!0,children:(0,s.jsx)(c.A,{sx:{position:"relative",pt:"100%",cursor:"pointer"},children:(0,s.jsx)(C.A,{component:"img",image:t.image,alt:t.title,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",backgroundColor:"background.paper"}})})}),(0,s.jsxs)(S.A,{sx:{flexGrow:1},children:[t.category&&(0,s.jsx)(x.A,{label:t.category,size:"small",sx:{mb:1}}),(0,s.jsx)(O(),{href:"/products/".concat(t.id),passHref:!0,children:(0,s.jsx)(d.A,{gutterBottom:!0,variant:"h6",component:"div",noWrap:!0,sx:{cursor:"pointer"},children:t.title})}),(0,s.jsx)(d.A,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:1,height:"2.8em"},children:t.description}),t.rating&&(0,s.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,s.jsx)(z.A,{value:t.rating.rate,precision:.1,readOnly:!0,size:"small",emptyIcon:(0,s.jsx)(D.A,{style:{opacity:.55},fontSize:"inherit"})}),(0,s.jsxs)(d.A,{variant:"caption",color:"text.secondary",sx:{ml:.5},children:["(",t.rating.count,")"]})]}),(0,s.jsxs)(d.A,{variant:"h6",color:"primary",children:["$",t.price]})]}),o&&(0,s.jsxs)(E.A,{sx:{justifyContent:"flex-end",pt:0},children:[(0,s.jsx)(P.A,{"aria-label":t.liked?"Remove from favorites":"Add to favorites",onClick:()=>r(t.id),size:"small",children:t.liked?(0,s.jsx)(_.A,{color:"error",fontSize:"small"}):(0,s.jsx)(L.A,{fontSize:"small"})}),i&&(0,s.jsx)(P.A,{"aria-label":"Edit product",onClick:()=>i(t.id),size:"small",children:(0,s.jsx)(W.A,{fontSize:"small"})}),(0,s.jsx)(P.A,{"aria-label":"Delete product",onClick:()=>l(t.id),size:"small",children:(0,s.jsx)(F.A,{fontSize:"small"})})]})]})};var H=r(9867);let B=()=>{let{products:e,fetchProducts:t,loading:r,error:k}=(0,H.K)(),[C,S]=(0,l.useState)("all"),[z,E]=(0,l.useState)(""),[P,_]=(0,l.useState)("all"),[L,W]=(0,l.useState)("none"),[F,N]=(0,l.useState)(1),{toggleLike:D,deleteProduct:B}=(0,H.K)();(0,l.useEffect)(()=>{0===e.length&&t()},[t,e.length]);let I=["all",...Array.from(new Set(e.map(e=>e.category).filter(e=>!!e)))],K=e.filter(e=>"all"===C||e.liked).filter(e=>"all"===P||e.category===P).filter(e=>e.title.toLowerCase().includes(z.toLowerCase())||e.description.toLowerCase().includes(z.toLowerCase())).sort((e,t)=>"asc"===L?e.price-t.price:"desc"===L?t.price-e.price:0),J=K.slice((F-1)*5,5*F);return r&&0===e.length?(0,s.jsx)(i.A,{maxWidth:"xl",sx:{py:4,textAlign:"center"},children:(0,s.jsx)(o.A,{})}):k?(0,s.jsx)(i.A,{maxWidth:"xl",sx:{py:4},children:(0,s.jsx)(a.A,{severity:"error",children:k})}):(0,s.jsx)(i.A,{maxWidth:"xl",sx:{py:4},children:(0,s.jsxs)(n.A,{elevation:0,sx:{p:3,mb:4},children:[(0,s.jsxs)(c.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"},justifyContent:"space-between",gap:2,mb:3},children:[(0,s.jsxs)(d.A,{variant:"h4",component:"h1",children:["Products",e.length>0&&(0,s.jsx)(x.A,{label:"".concat(K.length," items"),size:"small",sx:{ml:2}})]}),(0,s.jsxs)(c.A,{sx:{display:"flex",gap:2,flexWrap:"wrap",width:{xs:"100%",md:"auto"},justifyContent:{xs:"flex-start",md:"flex-end"}},children:[(0,s.jsx)(h.A,{placeholder:"Search products...",variant:"outlined",size:"small",value:z,onChange:e=>{E(e.target.value),N(1)},slotProps:{input:{startAdornment:(0,s.jsx)(p.A,{position:"start",children:(0,s.jsx)(w.A,{})})}},sx:{minWidth:250}}),(0,s.jsx)(u.A,{sx:{minWidth:120},size:"small",children:(0,s.jsxs)(m.A,{value:P,onChange:e=>{_(e.target.value),N(1)},displayEmpty:!0,inputProps:{"aria-label":"Select category"},children:[(0,s.jsx)(j.A,{value:"all",children:"All Categories"}),I.filter(e=>"all"!==e).map(e=>(0,s.jsx)(j.A,{value:e,children:e},e))]})}),(0,s.jsx)(u.A,{sx:{minWidth:120},size:"small",children:(0,s.jsxs)(m.A,{value:L,onChange:e=>{W(e.target.value),N(1)},displayEmpty:!0,inputProps:{"aria-label":"Sort by price"},children:[(0,s.jsx)(j.A,{value:"none",children:"Default sorting"}),(0,s.jsx)(j.A,{value:"asc",children:"Price: Low to High"}),(0,s.jsx)(j.A,{value:"desc",children:"Price: High to Low"})]})}),(0,s.jsxs)(f.A,{value:C,exclusive:!0,onChange:(e,t)=>{t&&(S(t),N(1))},size:"small",children:[(0,s.jsx)(A.A,{value:"all",children:"All"}),(0,s.jsx)(A.A,{value:"liked",children:"Favorites"})]}),(0,s.jsx)(O(),{href:"/create-product",passHref:!0,children:(0,s.jsx)(g.A,{variant:"contained",startIcon:(0,s.jsx)(b.A,{}),sx:{whiteSpace:"nowrap"},children:"Add Product"})})]})]}),0===K.length?(0,s.jsx)(c.A,{sx:{textAlign:"center",py:8},children:(0,s.jsx)(d.A,{variant:"body1",color:"text.secondary",children:"No products found"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Ay,{container:!0,spacing:3,children:J.map(e=>(0,s.jsx)(y.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,s.jsx)(T,{product:e,onLike:D,onDelete:B})},e.id))}),(0,s.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,s.jsx)(v.A,{count:Math.ceil(K.length/5),page:F,onChange:(e,t)=>{N(t),window.scrollTo({top:0,behavior:"smooth"})},color:"primary",showFirstButton:!0,showLastButton:!0,siblingCount:1,boundaryCount:1})})]})]})})};function I(){let{products:e,fetchProducts:t}=(0,H.K)();return(0,l.useEffect)(()=>{0===e.length&&t()},[t,e.length]),(0,s.jsx)(B,{})}},9867:(e,t,r)=>{"use strict";r.d(t,{K:()=>s});let s=(0,r(8106).v)(e=>({products:[],loading:!1,error:null,fetchProducts:async()=>{e({loading:!0,error:null});try{let t=await fetch("https://fakestoreapi.com/products");if(!t.ok)throw Error("Failed to fetch products");let r=await t.json();e({products:r.map(e=>({...e,liked:!1})),loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},toggleLike:t=>e(e=>({products:e.products.map(e=>e.id===t?{...e,liked:!e.liked}:e)})),deleteProduct:async t=>{try{await fetch("https://fakestoreapi.com/products/".concat(t),{method:"DELETE"}),e(e=>({products:e.products.filter(e=>e.id!==t)}))}catch(e){console.error("Failed to delete product:",e)}},addProduct:async t=>{try{let r=await fetch("https://fakestoreapi.com/products",{method:"POST",body:JSON.stringify(t)}),s=await r.json();e(e=>({products:[...e.products,{...s,liked:!1}]}))}catch(e){console.error("Failed to add product:",e)}},editProduct:async(t,r)=>{try{let s=await fetch("https://fakestoreapi.com/products/".concat(t),{method:"PUT",body:JSON.stringify(r)}),l=await s.json();e(e=>({products:e.products.map(e=>e.id===t?{...e,...l}:e)}))}catch(e){console.error("Failed to edit product:",e)}}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[570,600,230,744,844,636,593,792],()=>t(2411)),_N_E=e.O()}]);