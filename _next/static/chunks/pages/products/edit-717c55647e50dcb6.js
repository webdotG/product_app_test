(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{1361:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var i=r(7876),o=r(9099),a=r(3711),s=r(9867),d=r(9143),c=r(9794),n=r(4868),l=r(5650),u=r(8230),p=r.n(u);function h(){let{id:e}=(0,o.useRouter)().query,{products:t}=(0,s.K)(),r=t.find(t=>t.id===Number(e));return r?(0,i.jsx)(a.A,{initialData:r,isEditing:!0}):(0,i.jsxs)(d.A,{maxWidth:"md",sx:{py:4,textAlign:"center"},children:[(0,i.jsx)(c.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Product not found"}),(0,i.jsx)(p(),{href:"/products",passHref:!0,children:(0,i.jsx)(n.A,{variant:"outlined",startIcon:(0,i.jsx)(l.A,{}),children:"Back to products"})})]})}},3620:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/edit",function(){return r(1361)}])},3711:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var i=r(7876),o=r(4232),a=r(9099),s=r(9143),d=r(9794),c=r(1538),n=r(1494),l=r(9227),u=r(9600),p=r(4868),h=r(9867);let m=e=>{let{initialData:t,isEditing:r=!1}=e,{addProduct:m,editProduct:g}=(0,h.K)(),x=(0,a.useRouter)(),[f,j]=(0,o.useState)({title:(null==t?void 0:t.title)||"",description:(null==t?void 0:t.description)||"",price:(null==t?void 0:t.price)||0,image:(null==t?void 0:t.image)||""}),[A,v]=(0,o.useState)({title:"",description:"",price:"",image:""}),w=()=>{let e=!0,t={title:"",description:"",price:"",image:""};return f.title.trim()||(t.title="Title is required",e=!1),f.description.trim()||(t.description="Description is required",e=!1),f.price<=0&&(t.price="Price must be greater than 0",e=!1),f.image.trim()?/^https?:\/\/.+\..+/.test(f.image)||(t.image="Please enter a valid URL",e=!1):(t.image="Image URL is required",e=!1),v(t),e},y=async e=>{e.preventDefault(),w()&&(r&&(null==t?void 0:t.id)?await g(t.id,f):await m(f),x.push("/products"))},k=e=>{let{name:t,value:r}=e.target;j(e=>({...e,[t]:"price"===t?parseFloat(r)||0:r}))};return(0,i.jsxs)(s.A,{maxWidth:"sm",sx:{py:4},children:[(0,i.jsx)(d.A,{variant:"h4",component:"h1",gutterBottom:!0,children:r?"Edit Product":"Create New Product"}),(0,i.jsx)(c.A,{sx:{mb:4}}),(0,i.jsx)(n.A,{component:"form",onSubmit:y,sx:{mt:2},children:(0,i.jsxs)(l.A,{spacing:3,children:[(0,i.jsx)(u.A,{fullWidth:!0,label:"Title",name:"title",value:f.title,onChange:k,error:!!A.title,helperText:A.title,required:!0}),(0,i.jsx)(u.A,{fullWidth:!0,label:"Description",name:"description",value:f.description,onChange:k,multiline:!0,rows:4,error:!!A.description,helperText:A.description,required:!0}),(0,i.jsx)(u.A,{fullWidth:!0,label:"Price",name:"price",type:"number",value:f.price,onChange:k,InputProps:{inputProps:{min:0,step:.01}},error:!!A.price,helperText:A.price,required:!0}),(0,i.jsx)(u.A,{fullWidth:!0,label:"Image URL",name:"image",value:f.image,onChange:k,error:!!A.image,helperText:A.image,required:!0}),(0,i.jsxs)(l.A,{direction:"row",spacing:2,justifyContent:"flex-end",sx:{mt:2},children:[(0,i.jsx)(p.A,{variant:"outlined",onClick:()=>x.push("/products"),children:"Cancel"}),(0,i.jsx)(p.A,{type:"submit",variant:"contained",color:"primary",children:r?"Update Product":"Create Product"})]})]})})]})}},5650:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(1057),o=r(7876);let a=(0,i.A)((0,o.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},9867:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});let i=(0,r(8106).v)(e=>({products:[],loading:!1,error:null,fetchProducts:async()=>{e({loading:!0,error:null});try{let t=await fetch("https://fakestoreapi.com/products");if(!t.ok)throw Error("Failed to fetch products");let r=await t.json();e({products:r.map(e=>({...e,liked:!1})),loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},toggleLike:t=>e(e=>({products:e.products.map(e=>e.id===t?{...e,liked:!e.liked}:e)})),deleteProduct:async t=>{try{await fetch("https://fakestoreapi.com/products/".concat(t),{method:"DELETE"}),e(e=>({products:e.products.filter(e=>e.id!==t)}))}catch(e){console.error("Failed to delete product:",e)}},addProduct:async t=>{try{let r=await fetch("https://fakestoreapi.com/products",{method:"POST",body:JSON.stringify(t)}),i=await r.json();e(e=>({products:[...e.products,{...i,liked:!1}]}))}catch(e){console.error("Failed to add product:",e)}},editProduct:async(t,r)=>{try{let i=await fetch("https://fakestoreapi.com/products/".concat(t),{method:"PUT",body:JSON.stringify(r)}),o=await i.json();e(e=>({products:e.products.map(e=>e.id===t?{...e,...o}:e)}))}catch(e){console.error("Failed to edit product:",e)}}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[570,600,230,402,636,593,792],()=>t(3620)),_N_E=e.O()}]);