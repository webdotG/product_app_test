(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{800:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(7876),o=r(3711);function a(){return(0,i.jsx)(o.A,{})}},3711:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var i=r(7876),o=r(4232),a=r(9099),c=r(9143),s=r(9794),d=r(1538),n=r(1494),l=r(9227),p=r(9600),u=r(4868),h=r(9867);let m=e=>{let{initialData:t,isEditing:r=!1}=e,{addProduct:m,editProduct:g}=(0,h.K)(),f=(0,a.useRouter)(),[x,w]=(0,o.useState)({title:(null==t?void 0:t.title)||"",description:(null==t?void 0:t.description)||"",price:(null==t?void 0:t.price)||0,image:(null==t?void 0:t.image)||""}),[v,y]=(0,o.useState)({title:"",description:"",price:"",image:""}),j=()=>{let e=!0,t={title:"",description:"",price:"",image:""};return x.title.trim()||(t.title="Title is required",e=!1),x.description.trim()||(t.description="Description is required",e=!1),x.price<=0&&(t.price="Price must be greater than 0",e=!1),x.image.trim()?/^https?:\/\/.+\..+/.test(x.image)||(t.image="Please enter a valid URL",e=!1):(t.image="Image URL is required",e=!1),y(t),e},P=async e=>{e.preventDefault(),j()&&(r&&(null==t?void 0:t.id)?await g(t.id,x):await m(x),f.push("/products"))},k=e=>{let{name:t,value:r}=e.target;w(e=>({...e,[t]:"price"===t?parseFloat(r)||0:r}))};return(0,i.jsxs)(c.A,{maxWidth:"sm",sx:{py:4},children:[(0,i.jsx)(s.A,{variant:"h4",component:"h1",gutterBottom:!0,children:r?"Edit Product":"Create New Product"}),(0,i.jsx)(d.A,{sx:{mb:4}}),(0,i.jsx)(n.A,{component:"form",onSubmit:P,sx:{mt:2},children:(0,i.jsxs)(l.A,{spacing:3,children:[(0,i.jsx)(p.A,{fullWidth:!0,label:"Title",name:"title",value:x.title,onChange:k,error:!!v.title,helperText:v.title,required:!0}),(0,i.jsx)(p.A,{fullWidth:!0,label:"Description",name:"description",value:x.description,onChange:k,multiline:!0,rows:4,error:!!v.description,helperText:v.description,required:!0}),(0,i.jsx)(p.A,{fullWidth:!0,label:"Price",name:"price",type:"number",value:x.price,onChange:k,InputProps:{inputProps:{min:0,step:.01}},error:!!v.price,helperText:v.price,required:!0}),(0,i.jsx)(p.A,{fullWidth:!0,label:"Image URL",name:"image",value:x.image,onChange:k,error:!!v.image,helperText:v.image,required:!0}),(0,i.jsxs)(l.A,{direction:"row",spacing:2,justifyContent:"flex-end",sx:{mt:2},children:[(0,i.jsx)(u.A,{variant:"outlined",onClick:()=>f.push("/products"),children:"Cancel"}),(0,i.jsx)(u.A,{type:"submit",variant:"contained",color:"primary",children:r?"Update Product":"Create Product"})]})]})})]})}},7792:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-product",function(){return r(800)}])},9867:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});let i=(0,r(8106).v)(e=>({products:[],loading:!1,error:null,fetchProducts:async()=>{e({loading:!0,error:null});try{let t=await fetch("https://fakestoreapi.com/products");if(!t.ok)throw Error("Failed to fetch products");let r=await t.json();e({products:r.map(e=>({...e,liked:!1})),loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},toggleLike:t=>e(e=>({products:e.products.map(e=>e.id===t?{...e,liked:!e.liked}:e)})),deleteProduct:async t=>{try{await fetch("https://fakestoreapi.com/products/".concat(t),{method:"DELETE"}),e(e=>({products:e.products.filter(e=>e.id!==t)}))}catch(e){console.error("Failed to delete product:",e)}},addProduct:async t=>{try{let r=await fetch("https://fakestoreapi.com/products",{method:"POST",body:JSON.stringify(t)}),i=await r.json();e(e=>({products:[...e.products,{...i,liked:!1}]}))}catch(e){console.error("Failed to add product:",e)}},editProduct:async(t,r)=>{try{let i=await fetch("https://fakestoreapi.com/products/".concat(t),{method:"PUT",body:JSON.stringify(r)}),o=await i.json();e(e=>({products:e.products.map(e=>e.id===t?{...e,...o}:e)}))}catch(e){console.error("Failed to edit product:",e)}}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[570,600,402,636,593,792],()=>t(7792)),_N_E=e.O()}]);