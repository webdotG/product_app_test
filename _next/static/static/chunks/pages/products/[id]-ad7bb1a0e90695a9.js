(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{5650:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var s=r(1057),o=r(7876);let i=(0,s.A)((0,o.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},8404:(t,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]",function(){return r(8856)}])},8856:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>C});var s=r(7876),o=r(9099),i=r(9143),c=r(7957),d=r(8865),a=r(4868),n=r(9794),l=r(1494),x=r(4538),h=r(1552),p=r(4933),u=r(9227),j=r(9017),m=r(946),A=r(1538),f=r(6166),y=r(3344),g=r(5230),k=r(7216),w=r(455),b=r(5650),v=r(8230),E=r.n(v),_=r(9867),P=r(4232),N=r(28);function C(){let t=(0,o.useRouter)(),{id:e}=t.query,{products:r,toggleLike:v,deleteProduct:C,loading:H,error:I,fetchProducts:B}=(0,_.K)(),O=r.find(t=>t.id===Number(e));return((0,P.useEffect)(()=>{0===r.length&&B()},[r.length,B]),H&&0===r.length)?(0,s.jsx)(i.A,{maxWidth:"md",sx:{py:4,textAlign:"center"},children:(0,s.jsx)(c.A,{})}):I?(0,s.jsxs)(i.A,{maxWidth:"md",sx:{py:4},children:[(0,s.jsx)(d.A,{severity:"error",children:I}),(0,s.jsx)(E(),{href:"/products",passHref:!0,children:(0,s.jsx)(a.A,{variant:"outlined",startIcon:(0,s.jsx)(b.A,{}),sx:{mt:2},children:"Back to products"})})]}):O?(0,s.jsxs)(i.A,{maxWidth:"lg",sx:{py:4},children:[(0,s.jsx)(l.A,{sx:{mb:4},children:(0,s.jsx)(E(),{href:"/products",passHref:!0,children:(0,s.jsx)(a.A,{startIcon:(0,s.jsx)(b.A,{}),sx:{mb:2},children:"Back to products"})})}),(0,s.jsx)(x.A,{children:(0,s.jsxs)(l.A,{sx:{display:{xs:"block",md:"flex"}},children:[(0,s.jsx)(l.A,{sx:{width:{xs:"100%",md:"50%"},p:3,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"background.paper"},children:(0,s.jsx)(h.A,{component:"img",image:O.image,alt:O.title,sx:{maxHeight:400,width:"auto",objectFit:"contain"}})}),(0,s.jsx)(l.A,{sx:{width:{xs:"100%",md:"50%"},p:3},children:(0,s.jsxs)(p.A,{children:[(0,s.jsxs)(u.A,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,s.jsxs)(l.A,{children:[(0,s.jsx)(n.A,{variant:"h4",component:"h1",gutterBottom:!0,children:O.title}),(0,s.jsx)(j.A,{label:O.category,color:"primary",size:"small",sx:{mb:2}})]}),(0,s.jsxs)(u.A,{direction:"row",spacing:1,children:[(0,s.jsx)(m.A,{onClick:()=>v(O.id),"aria-label":O.liked?"Remove from favorites":"Add to favorites",children:O.liked?(0,s.jsx)(y.A,{color:"error"}):(0,s.jsx)(g.A,{})}),(0,s.jsx)(E(),{href:"/products/".concat(O.id,"/edit"),passHref:!0,children:(0,s.jsx)(m.A,{"aria-label":"Edit product",children:(0,s.jsx)(k.A,{})})}),(0,s.jsx)(m.A,{onClick:()=>{C(O.id),t.push("/products")},"aria-label":"Delete product",children:(0,s.jsx)(w.A,{})})]})]}),(0,s.jsx)(A.A,{sx:{my:2}}),O.rating&&(0,s.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,s.jsx)(f.A,{value:O.rating.rate,precision:.1,readOnly:!0,emptyIcon:(0,s.jsx)(N.A,{style:{opacity:.55},fontSize:"inherit"})}),(0,s.jsxs)(n.A,{variant:"body2",color:"text.secondary",sx:{ml:1},children:[O.rating.count," reviews"]})]}),(0,s.jsxs)(n.A,{variant:"h5",color:"primary",sx:{mb:3},children:["$",O.price]}),(0,s.jsx)(n.A,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-line"},children:O.description})]})})]})})]}):(0,s.jsxs)(i.A,{maxWidth:"md",sx:{py:4,textAlign:"center"},children:[(0,s.jsx)(n.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Product not found"}),(0,s.jsx)(E(),{href:"/products",passHref:!0,children:(0,s.jsx)(a.A,{variant:"outlined",startIcon:(0,s.jsx)(b.A,{}),children:"Back to products"})})]})}},9867:(t,e,r)=>{"use strict";r.d(e,{K:()=>s});let s=(0,r(8106).v)(t=>({products:[],loading:!1,error:null,fetchProducts:async()=>{t({loading:!0,error:null});try{let e=await fetch("https://fakestoreapi.com/products");if(!e.ok)throw Error("Failed to fetch products");let r=await e.json();t({products:r.map(t=>({...t,liked:!1})),loading:!1})}catch(e){t({error:e instanceof Error?e.message:"Unknown error",loading:!1})}},toggleLike:e=>t(t=>({products:t.products.map(t=>t.id===e?{...t,liked:!t.liked}:t)})),deleteProduct:async e=>{try{await fetch("https://fakestoreapi.com/products/".concat(e),{method:"DELETE"}),t(t=>({products:t.products.filter(t=>t.id!==e)}))}catch(t){console.error("Failed to delete product:",t)}},addProduct:async e=>{try{let r=await fetch("https://fakestoreapi.com/products",{method:"POST",body:JSON.stringify(e)}),s=await r.json();t(t=>({products:[...t.products,{...s,liked:!1}]}))}catch(t){console.error("Failed to add product:",t)}},editProduct:async(e,r)=>{try{let s=await fetch("https://fakestoreapi.com/products/".concat(e),{method:"PUT",body:JSON.stringify(r)}),o=await s.json();t(t=>({products:t.products.map(t=>t.id===e?{...t,...o}:t)}))}catch(t){console.error("Failed to edit product:",t)}}}))}},t=>{var e=e=>t(t.s=e);t.O(0,[570,230,402,744,636,593,792],()=>e(8404)),_N_E=t.O()}]);